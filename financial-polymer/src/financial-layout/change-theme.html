
<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-ripple/paper-ripple.html">
<!-- <link rel="import" href="../../bower_components/app-storage/app-localstorage/app-localstorage-document.html"> -->
<link rel="import" href="../../bower_components/paper-listbox/paper-listbox.html">
<link rel="import" href="../paper-dropdown-menu2/paper-dropdown-menu2.html">
<link rel="import" href="../paper-item-ext/paper-item-ext.html">
<!-- <link rel="import" href="../bower_components/paper-styles/paper-styles.html"> -->

<dom-module id="change-theme">
  <template>
    <style>
      :host{
        width:100%;
        height:100%;
      }
    </style>

    <!-- <app-localstorage-document key="styles-themes" data={{selectedTheme}}></app-localstorage-document> -->
    <paper-dropdown-menu label="change theme:" name="curTheme" value="{{selectedValue}}" horizontal-align='right' vertical-align='top' dynamic-align='true'>
      <paper-listbox class="dropdown-content" attr-for-selected='value' selected="{{selectedTheme}}">
        <template is='dom-repeat' items='{{allThemeNames}}'>
            <paper-item-ext label="{{item}}" value="{{item}}">{{item}}<paper-ripple></paper-ripple></paper-item-ext>
        </template>
      </paper-listbox>
    </paper-dropdown-menu>

  </template>

  <script>
    var allThemeNames = ["citric-flames","denim","everest","sky"];

    Polymer({
      is: 'change-theme',
      properties: {
        selectedTheme:{
            type:String,
            notify:true,
            value:"",
            reflectToAttribute:true,
            // observer:"_observerSelectedTheme"
        },
        allThemeNames:{
          type:String,
          value:allThemeNames,
          notify:true
        },
        selectedValue:{
          type:String,
          notify:true,
          observer:"_observerSelectedThemeValue"
        }

      },
      // observers:["_observerSelectedTheme(selectedTheme)"],

      ready:function(){
        // var themeName = window.localStorage.getItem("styles-themes");
        // if(!themeName){
        //   this.set("selectedTheme","denim");
        // }
      },

      _observerSelectedTheme: function(selectedTheme) {
        var that = this;
        if(selectedTheme){
          window.localStorage.setItem("styles-themes",selectedTheme);
        }
      },
      _observerSelectedThemeValue:function(newValue,oldValue){
        if(newValue && newValue != oldValue){
          window.localStorage.setItem("styles-themes",newValue);
          window.location.reload();
        }
      }


    });

  </script>

</dom-module>
