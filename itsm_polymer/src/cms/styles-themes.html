
<!-- <link rel="import" href="../bower_components/paper-styles/paper-styles.html"> -->
<link rel="import" href="../themes/citric-flames/citric-flames-styles.html" async="true">
<link rel="import" href="../themes/denim/denim-styles.html" async="true">
<link rel="import" href="../themes/everest/everest-styles.html" async="true">
<link rel="import" href="../themes/sky/sky-styles.html" async="true">


<dom-module id="styles-themes">
    <template>
    <style></style>
    <!-- <app-localstorage-document key="styles-themes" data="{{selectedTheme}}"></app-localstorage-document> -->
    </template>
    <script>
      var allThemeNames = ["citric-flames","denim","everest","sky"];
      class StylesThemes extends Polymer.Element {

        static get is() { return 'styles-themes'; }

        static get properties() { return {

          appTitle: String,

          smallScreen: Boolean,
          isAppRoot:{
            type:Boolean,
            value:false
          },
          selectedTheme:{
            type:String,
            value:function(){
              var themename=window.localStorage.getItem("styles-themes")||"sky";
              window.localStorage.setItem("styles-themes",themename);
              return themename;
            }
          }

        }}

        ready(){
          super.ready();
          var that = this;
          if(this.selectedTheme){
            if(this.isAppRoot){
              Polymer.importHref(this.resolveUrl('../themes/'+that.selectedTheme+'/'+ that.selectedTheme +'.html'), function() {
                that.updateStyles();
              },null,true);
            }else{
              var styleEle = document.createElement('style');
              styleEle.setAttribute('include', that.selectedTheme + '-styles');
              var sty =Polymer.StyleUtil.cssFromModule(that.selectedTheme + "-styles");
              styleEle.append(sty);
              that.parentNode.prepend(styleEle);
            }

          }
        }

      }
      customElements.define(StylesThemes.is, StylesThemes);

    </script>
</dom-module>
