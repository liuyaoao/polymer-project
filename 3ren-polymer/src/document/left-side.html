
<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/iron-swipeable-pages/iron-swipeable-pages.html">

<dom-module id="left-side">
  <link rel="import" type="css" href="../../css/page.css">

  <template>
    <style include="polymer-bootstrap">
    a:focus,a:hover{
      text-decoration: none;
    }
    .dropdown div:first-child:hover{
      cursor:pointer;
      background-color:#d2cccc;
    }
    .dropdown li a.active{
      font-weight: bold;
      color: #2066a2;
    }
    </style>
    <div class="left-side" id="leftSide">
        <iron-selector role="leftNavigation" class="menu-list2" selected="[[category.name]]" attr-for-selected="name">
          <a name="document" href="/document" on-click="_onClickBackToSummary"><paper-ripple></paper-ripple>产品概述</a>
          <h3>用户手册</h3>
          <div class="dropdown">
                <div on-tap="_openSub">入门<span></span></div>
                <ul class="plan-name" id="menu1">
                    <li><a href="/document/docEnter" name="docEnter" on-tap="_scrollToTop"><paper-ripple></paper-ripple>登录中</a></li>
                    <li><a href="/document/docMessage" name="docMessage" on-tap="_scrollToTop"><paper-ripple></paper-ripple>消息传播基础</a></li>
                    <li><a href="/document/docNotice" name="docNotice" on-tap="_scrollToTop"><paper-ripple></paper-ripple>配置通知</a></li>
                    <li><a href="/document/docDialogue" name="docDialogue" on-tap="_scrollToTop"><paper-ripple></paper-ripple>组织对话</a></li>
                    <li><a href="/document/docSeek" name="docSeek" on-tap="_scrollToTop"><paper-ripple></paper-ripple>搜索</a></li>
                    <li><a href="/document/docTeam" name="docTeam" on-tap="_scrollToTop"><paper-ripple></paper-ripple>创建团队</a></li>
                    <li><a href="/document/docMember" name="docMember" on-tap="_scrollToTop"><paper-ripple></paper-ripple>管理会员</a></li>
                    <li><a href="/document/docOrganization" name="docOrganization" on-tap="_scrollToTop"><paper-ripple></paper-ripple>组织最重要</a></li>
                    <li><a href="/document/docApplication" name="docApplication" on-tap="_scrollToTop"><paper-ripple></paper-ripple>使用三人即时通桌面应用</a></li>
                </ul>
          </div>
          <div class="dropdown">
              <div on-tap="_openSub">消息<span></span></div>
              <ul class="plan-name" id="menu2">
                  <li><a href="/document/docMessages" name="docMessages" on-tap="_scrollToTop"><paper-ripple></paper-ripple>消息</a></li>
                  <li><a href="/document/docTeammates" name="docTeammates" on-tap="_scrollToTop"><paper-ripple></paper-ripple>提到队友</a></li>
                  <li><a href="/document/docFormatting" name="docFormatting" on-tap="_scrollToTop"><paper-ripple></paper-ripple>格式化文本</a></li>
                  <li><a href="/document/docShare" name="docShare" on-tap="_scrollToTop"><paper-ripple></paper-ripple>共享文件</a></li>
                  <li><a href="/document/docPerform" name="docPerform" on-tap="_scrollToTop"><paper-ripple></paper-ripple>执行命令</a></li>
                  <li><a href="/document/docMail" name="docMail" on-tap="_scrollToTop"><paper-ripple></paper-ripple>标记邮件</a></li>
                  <li><a href="/document/docShortcuts" name="docShortcuts" on-tap="_scrollToTop"><paper-ripple></paper-ripple>键盘快捷键</a></li>
                  <li><a href="/document/docFixed" name="docFixed" on-tap="_scrollToTop"><paper-ripple></paper-ripple>固定消息</a></li>
              </ul>
        </div>
        <div class="dropdown">
            <div on-tap="_openSub">设置<span></span></div>
            <ul class="plan-name" id="menu3">
                <li><a href="/document/docAccount" name="docAccount" on-tap="_hideDropdown"><paper-ripple></paper-ripple>帐号设定</a></li>
                <li><a href="/document/docTheme" name="docTheme" on-tap="_hideDropdown"><paper-ripple></paper-ripple>主题颜色</a></li>
                <li><a href="/document/docChannel" name="docChannel" on-tap="_hideDropdown"><paper-ripple></paper-ripple>频道设置</a></li>
                <li><a href="/document/docTeamSet" name="docTeamSet" on-tap="_hideDropdown"><paper-ripple></paper-ripple>团队设置</a></li>
                <li><a href="/document/docExpression" name="docExpression" on-tap="_hideDropdown"><paper-ripple></paper-ripple>自定义表情符号</a></li>
                <li><a href="/document/docIntegration" name="docIntegration" on-tap="_hideDropdown"><paper-ripple></paper-ripple>集成</a></li>
            </ul>
      </div>
      <h3>管理员指南</h3>
      <div class="dropdown">
          <div on-tap="_openSub">部署<span></span></div>
          <ul class="plan-name" id="menu4">
              <li><a href="/document/docAdministratorTask" name="docAdministratorTask" on-tap="_scrollToTop"><paper-ripple></paper-ripple>管理员任务</a></li>
              <li><a href="/document/docLoading" name="docLoading" on-tap="_scrollToTop"><paper-ripple></paper-ripple>批量装载数据</a></li>
              <li><a href="/docMobileApp" name="docMobileApp" on-tap="_scrollToTop"><paper-ripple></paper-ripple>移动应用指南</a></li>
              <li><a href="/docActive" name="docActive" on-tap="_scrollToTop"><paper-ripple></paper-ripple>Active Directory / LDAP设置</a></li>
              <li><a href="/docCertification" name="docCertification" on-tap="_scrollToTop"><paper-ripple></paper-ripple>多因素认证（E10）</a></li>
              <li><a href="/docSAML" name="docSAML" on-tap="_scrollToTop"><paper-ripple></paper-ripple>SAML单点登录（E20）</a></li>
              <li><a href="/docExpand" name="docExpand" on-tap="_scrollToTop"><paper-ripple></paper-ripple>扩大企业规模</a></li>
              <li><a href="/docAvailability" name="docAvailability" on-tap="_scrollToTop"><paper-ripple></paper-ripple>高可用性集群（E20）</a></li>
              <li><a href="/docGitLab" name="docGitLab" on-tap="_scrollToTop"><paper-ripple></paper-ripple>GitLab单点登录</a></li>
              <li><a href="/docGoogle" name="docGoogle" on-tap="_scrollToTop"><paper-ripple></paper-ripple>Google单点登录（E20）</a></li>
              <li><a href="/docOffice" name="docOffice" on-tap="_scrollToTop"><paper-ripple></paper-ripple>Office 365单点登录（E20）</a></li>
              <li><a href="/docMonitor" name="docMonitor" on-tap="_scrollToTop"><paper-ripple></paper-ripple>绩效监测（E20）</a></li>
              <li><a href="/docClientData" name="docClientData" on-tap="_scrollToTop"><paper-ripple></paper-ripple>客户端数据存储常见问题</a></li>
          </ul>
    </div>
    <div class="dropdown">
        <div on-tap="_openSub">管理<span></span></div>
        <ul class="plan-name" id="menu5">
            <li><a href="/docCommand" name="docCommand" on-tap="_hideDropdown"><paper-ripple></paper-ripple>命令行工具</a></li>
            <li><a href="/docStatistics" name="docStatistics" on-tap="_hideDropdown"><paper-ripple></paper-ripple>统计</a></li>
            <li><a href="/docAnnouncement" name="docAnnouncement" on-tap="_hideDropdown"><paper-ripple></paper-ripple>公告标语</a></li>
            <li><a href="/docCompliance" name="docCompliance" on-tap="_hideDropdown"><paper-ripple></paper-ripple>合规报告和监督</a></li>
            <li><a href="/docBranding" name="docBranding" on-tap="_hideDropdown"><paper-ripple></paper-ripple>自定义品牌工具</a></li>
            <li><a href="/docBackup" name="docBackup" on-tap="_hideDropdown"><paper-ripple></paper-ripple>备份和故障恢复</a></li>
            <li><a href="/docUpgrade" name="docUpgrade" on-tap="_hideDropdown"><paper-ripple></paper-ripple>升级最新服务器</a></li>
            <li><a href="/docMigrating" name="docMigrating" on-tap="_hideDropdown"><paper-ripple></paper-ripple>迁移指南</a></li>
        </ul>
    </div>
    <div class="dropdown">
        <div on-tap="_openSub" class="dropdownss">集成指南<span></span></div>
        <ul class="plan-name" id="menu6">
            <li><a href="/docApi" name="docApi" on-tap="_hideDropdown"><paper-ripple></paper-ripple>最重要的API</a></li>
            <li><a href="/" name="" on-tap="_hideDropdown"><paper-ripple></paper-ripple>APIv4开发流程</a></li>
            <li><a href="/" name="" on-tap="_hideDropdown"><paper-ripple></paper-ripple>传入的Webhooks</a></li>
            <li><a href="/" name="" on-tap="_hideDropdown"><paper-ripple></paper-ripple>外出Webhooks</a></li>
            <li><a href="/" name="" on-tap="_hideDropdown"><paper-ripple></paper-ripple>斜杠命令</a></li>
            <li><a href="/" name="" on-tap="_hideDropdown"><paper-ripple></paper-ripple>留言附件</a></li>
            <li><a href="/" name="" on-tap="_hideDropdown"><paper-ripple></paper-ripple>OAuth 2.0应用程序</a></li>
            <li><a href="/" name="" on-tap="_hideDropdown"><paper-ripple></paper-ripple>Zapier集成</a></li>
            <li><a href="/" name="" on-tap="_hideDropdown"><paper-ripple></paper-ripple>集成常见问题</a></li>
            <li><a href="/" name="" on-tap="_hideDropdown"><paper-ripple></paper-ripple>嵌入其他应用程序</a></li>
        </ul>
    </div>
      </iron-selector>
    </div>
  </template>
  <script>
    Polymer({
      is: 'left-side',
      properties: {
        subDocPage: {
          type: String,
          notify:true,
          observer: '_pageChanged'
        }
      },
      ready: function(){
        this._updateByPage(this.subDocPage);
      },
      _pageChanged: function(subDocPage,oldPage){
        console.log("左侧菜单组件监听subDocPage的变化：",subDocPage);
          this._updateByPage(subDocPage);
      },
      _updateByPage:function(page){
        var menuSubPage_1 = ["docEnter", "docMessage", "docDialogue", "docNotice", "docSeek", "docTeam", "docMember", "docOrganization", "docApplication"];
        var menuSubPage_2 = ["docMessages", "docTeammates", "docFormatting", "docShare", "docPerform", "docMail", "docShortcuts", "docFixed"];
        var menuSubPage_3 = ["docAccount", "docTheme", "docChannel", "docTeamSet", "docExpression", "docIntegration"];
        var menuSubPage_4 = ["docAdministratorTask", "docLoading", "docMobileApp", "docActive", "docCertification", "docSAML", "docExpand", "docClientData","docOffice","docGoogle","docGitLab","docAvailability","docMonitor"];
        var menuSubPage_5 = ["docCommand", "docStatistics", "docAnnouncement", "docCompliance", "docBranding", "docBackup","docUpgrade","docMigrating"];
        var menuSubPage_6 = ["docApi", "", "", "", "", "","","","","",""];
        if(menuSubPage_1.indexOf(page)!=-1){
           $(this.$.menu1).css("display","block");
           $(this.$.menu1).closest(".dropdown").addClass("opened");
         }else if (menuSubPage_2.indexOf(page)!=-1) {
           $(this.$.menu2).css("display","block");
           $(this.$.menu2).closest(".dropdown").addClass("opened");
         }else if (menuSubPage_3.indexOf(page)!=-1) {
           $(this.$.menu3).css("display","block");
           $(this.$.menu3).closest(".dropdown").addClass("opened");
         }else if (menuSubPage_4.indexOf(page)!=-1) {
           $(this.$.menu4).css("display","block");
           $(this.$.menu4).closest(".dropdown").addClass("opened");
         }else if (menuSubPage_5.indexOf(page)!=-1) {
           $(this.$.menu5).css("display","block");
           $(this.$.menu5).closest(".dropdown").addClass("opened");
         }else if (menuSubPage_6.indexOf(page)!=-1) {
           $(this.$.menu6).css("display","block");
           $(this.$.menu6).closest(".dropdown").addClass("opened");
         }
        this.toggleClass('active',false,this.$$(".dropdown .active"));
        this.toggleClass('active',true,this.$$(".dropdown a[name="+page+"]"));
      },
      _onClickBackToSummary:function(e){
          this.subDocPage = "docSummary";
          this._scrollToTop(null);
      },
      _scrollToTop: function(e){
        var sHeight = this.$.leftSide.offsetTop - 60;
        window.scrollTo(0,sHeight);
      },

      _openSub:function(e){
        var cParent = e.currentTarget;
        var container = $(e.currentTarget).closest(".left-side");
        container.find(".dropdown.opened").find("ul").css("display","none");
        container.find(".dropdown.opened").find("div:first-child span").css({"background-image":"url(../../images/minus.svg)"});
        container.find(".dropdown.opened").removeClass("opened");

        var dropdown = $(e.currentTarget).closest(".dropdown");
        dropdown.addClass("opened");
        dropdown.find("ul").css("display","block");
        dropdown.find("div:first-child span").css({"background-image":"url(../../images/add.svg)"});
      }
    });
  </script>
</dom-module>
